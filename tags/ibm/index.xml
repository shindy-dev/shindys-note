<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>IBM on Shindy's Note</title><link>https://shindy-dev.github.io/shindys-note/tags/ibm/</link><description>Recent content in IBM on Shindy's Note</description><image><title>Shindy's Note</title><url>https://shindy-dev.github.io/shindys-note/favicon.ico</url><link>https://shindy-dev.github.io/shindys-note/favicon.ico</link></image><generator>Hugo -- 0.148.2</generator><language>ja</language><lastBuildDate>Fri, 15 Aug 2025 23:19:55 +0000</lastBuildDate><atom:link href="https://shindy-dev.github.io/shindys-note/tags/ibm/index.xml" rel="self" type="application/rss+xml"/><item><title>Db2</title><link>https://shindy-dev.github.io/shindys-note/posts/db2/</link><pubDate>Fri, 15 Aug 2025 23:19:55 +0000</pubDate><guid>https://shindy-dev.github.io/shindys-note/posts/db2/</guid><description>&lt;h2 id="はじめに">はじめに&lt;/h2>
&lt;p>RDBMSのDb2でよく使うコマンドや注意点を記載します。&lt;/p>
&lt;h2 id="よく使うコマンド">よく使うコマンド&lt;/h2>
&lt;h3 id="ライセンス確認">ライセンス確認&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">db2licm -l
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="バージョンbit数">バージョン・bit数&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">db2level
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="バックアップファイル情報確認">バックアップファイル情報確認&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">db2ckbkp -h &lt;span class="o">[&lt;/span>backup image&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;!-- raw HTML omitted -->
&lt;h2 id="db2のバージョン移行等での注意">Db2のバージョン移行等での注意&lt;/h2>
&lt;p>Db2バージョンが大きく異なると、別のバージョンを経由して移行（リストア）する必要がある。&lt;br>
9系から11.5系、10系から12系等が該当する。&lt;/p>
&lt;h3 id="今回の事例">今回の事例&lt;/h3>
&lt;ul>
&lt;li>移行&lt;strong>元&lt;/strong> DB2: v9.7 32bit&lt;/li>
&lt;li>移行&lt;strong>先&lt;/strong> DB2: v11.5 64bit&lt;/li>
&lt;li>バックアップファイル: オンライン、圧縮&lt;/li>
&lt;/ul>
&lt;h3 id="問題点">問題点&lt;/h3>
&lt;ol>
&lt;li>オンラインバックアップだとバージョン間でのリストアができない&lt;/li>
&lt;li>オフラインでも v9.7 から v11.5 へ直接のリストアはできない&lt;/li>
&lt;li>圧縮バックアップの場合、構成bit数が異なるDB2ではリストアできない&lt;/li>
&lt;/ol>
&lt;h3 id="解決策">解決策&lt;/h3>
&lt;ol>
&lt;li>一度v9.7でリストアし、オフラインバックアップを取得する&lt;/li>
&lt;li>v9.7 -&amp;gt; v11.1.4(10.xでも可) -&amp;gt; 11.5 の順にリストアバックアップを行う&lt;/li>
&lt;li>v9.7(32bit) -&amp;gt; v9.7(64bit)の順にリストアバックアップを行う&lt;/li>
&lt;/ol>
&lt;h3 id="手順">手順&lt;/h3>
&lt;ol>
&lt;li>v9.7(32bit)
リストア、オフラインバックアップ無圧縮を取得&lt;/li>
&lt;li>-&amp;gt; v9.7(64bit)
リストア、オフラインバックアップ圧縮を取得&lt;/li>
&lt;li>-&amp;gt; v11.1.4
リストア、オフラインバックアップ圧縮を取得&lt;/li>
&lt;li>-&amp;gt; v11.5
リストア、完了！&lt;/li>
&lt;/ol>
&lt;h3 id="注意">注意&lt;/h3>
&lt;ol>
&lt;li>11.5.4の場合のみ移行後runstatsで不具合がでるためdb2catを実行する必要がある&lt;/li>
&lt;/ol></description></item></channel></rss>